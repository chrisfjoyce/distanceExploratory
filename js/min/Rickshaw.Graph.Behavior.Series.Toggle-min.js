Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(e){this.graph=e.graph,this.legend=e.legend;var i=this;this.addAnchor=function(e){var s=document.createElement("a");s.innerHTML="&#10004;",s.classList.add("action"),e.element.insertBefore(s,e.element.firstChild),s.onclick=function(i){if(e.series.disabled)e.series.enable(),e.element.classList.remove("disabled");else{if(this.graph.series.filter(function(e){return!e.disabled}).length<=1)return;e.series.disable(),e.element.classList.add("disabled")}}.bind(this);var n=e.element.getElementsByTagName("span")[0];n.onclick=function(s){var n=e.series.disabled;if(!n)for(var t=0;t<i.legend.lines.length;t++){var a=i.legend.lines[t];if(e.series===a.series);else if(!a.series.disabled){n=!0;break}}n?(e.series.enable(),e.element.classList.remove("disabled"),i.legend.lines.forEach(function(i){e.series===i.series||(i.series.disable(),i.element.classList.add("disabled"))})):i.legend.lines.forEach(function(e){e.series.enable(),e.element.classList.remove("disabled")})}},this.legend&&("undefined"!=typeof $&&$(this.legend.list).sortable&&$(this.legend.list).sortable({start:function(e,i){i.item.bind("no.onclick",function(e){e.preventDefault()})},stop:function(e,i){setTimeout(function(){i.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(e){i.addAnchor(e)})),this._addBehavior=function(){this.graph.series.forEach(function(e){e.disable=function(){if(i.graph.series.length<=1)throw"only one series left";e.disabled=!0,i.graph.update()},e.enable=function(){e.disabled=!1,i.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}};