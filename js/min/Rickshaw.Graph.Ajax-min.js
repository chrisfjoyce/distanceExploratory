Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(a){this.dataURL=a.dataURL,this.onData=a.onData||function(a){return a},this.onComplete=a.onComplete||function(){},this.onError=a.onError||function(){},this.args=a,this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(a,s){a=this.onData(a),this.args.series=this._splice({data:a,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(a){var s=a.data,r=a.series;return a.series?(r.forEach(function(a){var r=a.key||a.name;if(!r)throw"series needs a key or a name";s.forEach(function(s){var t=s.key||s.name;if(!t)throw"data needs a key or a name";if(r==t){var i=["color","name","data"];i.forEach(function(r){s[r]&&(a[r]=s[r])})}})}),r):s}});