Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(t,i,e){if(e=e||{},"undefined"==typeof e.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof e.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(i),this.timeBase="undefined"==typeof e.timeBase?Math.floor((new Date).getTime()/1e3):e.timeBase,this.setTimeInterval(e.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=e.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var a=this.maxDataPoints-this.currentSize-1;a>1;a--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((a-1)*this.timeInterval||1)+this.timeBase,y:0,i:a})},this)},addData:function(t,i,e){if(t(i,e),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}});